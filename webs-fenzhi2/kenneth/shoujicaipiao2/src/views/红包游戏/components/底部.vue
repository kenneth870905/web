<template>
    <div class="åº•éƒ¨" ref="b" :class="className">
        <div class="æ°”æ³¡" v-show="æœªè¯»æ¡æ•°>0" @click="åˆ°åº•()">
            {{æœªè¯»æ¡æ•°}}
        </div>
        <div class="è¾“å…¥æ¡†">
            <input id="hbInput" type="text" @focus="è·å¾—ç„¦ç‚¹()" @blur="å¤±å»ç„¦ç‚¹()" @keyup.enter="å‘é€æ–‡å­—()" v-model="text" :readonly='!user.IsSend' :placeholder="!user.IsSend ? 'å‘è¨€å·²è¢«é™åˆ¶':'' ">
            <i @click="é€‰æ‹©è¡¨æƒ…åŒ…()" class="icon iconfont icon-smile"></i>
            <!-- <label for="hbInput" class="btn_1" @click="å‘é€æ–‡å­—()">å‘é€</label> -->
            <div class="btn_1" v-show="å¯ä»¥å‘é€" @click="å‘é€æ–‡å­—()">å‘é€</div>
            <!-- <button  class="mui-btn mui-btn-primary">å‘é€</button> -->
            <i v-show="!å¯ä»¥å‘é€" @click="é€‰æ‹©æ›´å¤š()" class="icon iconfont icon-jiahao"></i>
        </div>
        <div class="box_2" v-show="æ˜¾ç¤ºæ›´å¤š!=0">
            <ul class="å­—ä½“" v-show="æ˜¾ç¤ºæ›´å¤š==1">
                <li @click="å°è¡¨æƒ…(item)" v-for="(item, index) in å­—ä½“" :key="index">{{item}}</li>
            </ul>
            <ul class="æ›´å¤š" v-show="æ˜¾ç¤ºæ›´å¤š==2">
                <!-- <li @click="$toast('æš‚æœªå¼€æ”¾')">
                    <div><img :src="config.img_url+'static/image/hbgame/fuli.png'" alt=""></div>
                    <div>ç¦åˆ©</div>
                </li> -->
                <li @click="å‘çº¢åŒ…()">
                    <div><img :src="config.img_url+'static/image/hbgame/hongbao.png'" alt=""></div>
                    <div>çº¢åŒ…</div>
                </li>
                <li @click="$router.push('/agent')">
                    <div><img :src="config.img_url+'static/image/hbgame/jiaMeng.png'" alt=""></div>
                    <div>åŠ ç›Ÿ</div>
                </li>
                <li @click="$router.push('/my/chongzhi')">
                    <div><img :src="config.img_url+'static/image/hbgame/chongZhi.png'" alt=""></div>
                    <div>å……å€¼</div>
                </li>
                <li @click="$router.push('/my/tixian')">
                    <div><img :src="config.img_url+'static/image/hbgame/tixian.jpg'" alt=""></div>
                    <div>æç°</div>
                </li>
                <li @click="$router.push('/my/zxkf')">
                    <div><img :src="config.img_url+'static/image/hbgame/keFu.png'" alt=""></div>
                    <div>å®¢æœ</div>
                </li>
                <li @click="$router.push('/hbGame/rule')">
                    <div><img :src="config.img_url+'static/image/hbgame/wanFa.png'" alt=""></div>
                    <div>ç©æ³•</div>
                </li>
               
            </ul>
        </div>
    </div>
</template>

<script>
import { mapState, mapActions, mapMutations } from "vuex";
export default {
    name:"",
    inject:['åˆ°åº•'],
    data() {
        return {
            å­—ä½“: ['ğŸ˜€', 'ğŸ˜', 'ğŸ˜‚', 'ğŸ˜ƒ', 'ğŸ˜…', 'ğŸ˜†', 'ğŸ˜‡', 'ğŸ˜ˆ', 'ğŸ˜‰', 'ğŸ˜‘', 'ğŸ˜’', 'ğŸ˜“', 'ğŸ˜”', 'ğŸ˜•', 'ğŸ˜–', 'ğŸ˜˜', 'ğŸ˜¡', 'ğŸ˜­', 'ğŸ˜£', 'ğŸ˜¤', 'ğŸ˜¨',
                'ğŸ˜©', 'ğŸ˜°', 'ğŸ˜±', 'ğŸ˜²', 'ğŸ˜³', 'ğŸ˜´', 'ğŸ˜µ', 'ğŸ˜¶', 'ğŸ˜·', 'ğŸ¤', 'ğŸ²', 'ğŸµ', 'ğŸ€', 'ğŸ‚', 'ğŸ¡', 'ğŸ€„', 'ğŸ’¡', 'ğŸ’¢', 'ğŸ’£', 'ğŸ’¤', 'ğŸ’©', 'ğŸ’ª', 'ğŸ’°', 'ğŸ“š',
                'ğŸ“', 'ğŸ“¢', 'ğŸš«', 'ğŸš¿', 'ğŸŒ', 'ğŸŒ»', 'ğŸš', 'ğŸ«', 'ğŸ»', 'ğŸ‘Š', 'ğŸ‘Œ', 'ğŸ‘', 'ğŸ‘', 'ğŸ‘', 'ğŸ‘ª', 'ğŸ‘«', 'ğŸ˜¬', 'ğŸ‘»', 'ğŸ‘¼', 'ğŸ‘½', 'ğŸ‘¿', 'ğŸ’Š', 'ğŸ’‹', 'ğŸ’',
                'ğŸ”«', 'ğŸ˜Š', 'ğŸ˜‹', 'ğŸ˜Œ', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜š', 'ğŸ˜œ', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜Ÿ', 'ğŸ˜ª', 'ğŸ˜«', 'ğŸ˜¢', 'ğŸ˜¯', 'ğŸ™Š', 'ğŸ™', 'ğŸŒ™', 'ğŸŒ²', 'ğŸŒ¹', 'ğŸ‰', 'ğŸ–',
                'ğŸ¦', 'ğŸ·', 'ğŸ', 'ğŸ‚', 'ğŸ„', 'ğŸ‰', 'ğŸ“', 'ğŸ´', 'ğŸ¶', 'ğŸ·', 'ğŸ‘‘', 'ğŸ’„', 'ğŸ’”', 'ğŸ”¥', 'ğŸ•–', 'ğŸ™ˆ', 'ğŸ™‰', 'ğŸš€', 'â­', 'â°', 'â³', 'âš¡', 'âš½', 'â›„',
                'â›…', 'â˜', 'â˜º', 'âœŠ', 'âœ‹', 'âœŒ', 'âœ', 'â˜€', 'â˜', 'â˜”', 'â˜•', 'â„'],
            æ˜¾ç¤ºæ›´å¤š:0,
            text:"",
            className:"",
            type:100  //100 æ‰«é›·çº¢åŒ… 300 ç¦æŠ¢çº¢åŒ…
        }
    },
    computed: {
        ...mapState({
            config:'config',
            user:x=>x.çº¢åŒ…æ¸¸æˆ.user,
            æˆ¿é—´id:x=>x.çº¢åŒ…æ¸¸æˆ.æˆ¿é—´id,
            æœªè¯»æ¡æ•°:x=>x.çº¢åŒ…æ¸¸æˆ.æœªè¯»æ¡æ•°
        }),
        å¯ä»¥å‘é€(){
            let test1=/^\s+$/;
            if(!this.text || test1.test(this.text)){
                return false
            }else{
                return true
            }
        }
    },
    methods: {
        ...mapMutations({
            è®¾ç½®key:"çº¢åŒ…æ¸¸æˆ/è®¾ç½®key"
        }),
        ...mapActions({
            å‘é€æ¶ˆæ¯:'çº¢åŒ…æ¸¸æˆ/å‘é€æ¶ˆæ¯',
        }),
        å‘çº¢åŒ…(){
            if(this.type==100){
                this.$router.push(`/hbGame/sendSaol?id=${this.æˆ¿é—´id}`)
            }else if(this.type==300){
                this.$router.push(`/hbGame/sendJQ?id=${this.æˆ¿é—´id}`)
            }else{
                this.$router.push(`/hbGame/sendSaol?id=${this.æˆ¿é—´id}`)
            }
        },
        é€‰æ‹©è¡¨æƒ…åŒ…(){
            if(!this.user.IsSend){
                this.$toast('å‘è¨€å·²ç»è¢«é™åˆ¶ï¼Œè¯·è”ç³»å®¢æœ')
                return
            }
            this.æ˜¾ç¤ºæ›´å¤š=1
            this.$parent.æ˜¾ç¤ºå¤´éƒ¨ = false
        },
        é€‰æ‹©æ›´å¤š(){
            if(!this.user.IsSend){
                this.$toast('å‘è¨€å·²ç»è¢«é™åˆ¶ï¼Œè¯·è”ç³»å®¢æœ')
                return
            }
            this.æ˜¾ç¤ºæ›´å¤š=2
            this.$parent.æ˜¾ç¤ºå¤´éƒ¨ = false
        },
        å°è¡¨æƒ…(item){
            if(!this.user.IsSend) return
            this.text += item
        },
        å‘é€æ–‡å­—(){
            if(!this.user.IsSend){
                this.$toast('å‘è¨€å·²ç»è¢«é™åˆ¶ï¼Œè¯·è”ç³»å®¢æœ')
                return
            }
            if (!this.text || this.text=='' || this.text.match(/^\s+$/)) {
                this.$toast('è¯·è¾“å…¥æ–‡å­—')
                return
            }
            let obj={
                    type:1,
                    Content:this.text
                }
            this.å‘é€æ¶ˆæ¯(obj)
            this.text=''
        },
        è·å¾—ç„¦ç‚¹(){
            if(this.æ˜¾ç¤ºæ›´å¤š!=0){
                this.æ˜¾ç¤ºæ›´å¤š=0 
                setTimeout(() => {
                    this.$refs.b.scrollIntoView({ block: 'center'})            
                }, 500);
            }
            this.åˆ°åº•()
            // this.è®¾ç½®key(['è¾“å…¥ç„¦ç‚¹',true])
            this.$parent.æ˜¾ç¤ºå¤´éƒ¨ = false
        },
        å¤±å»ç„¦ç‚¹(){
            // this.è®¾ç½®key(['è¾“å…¥ç„¦ç‚¹',false])
            this.$parent.æ˜¾ç¤ºå¤´éƒ¨ = true
        }
    },
    mounted() {
        this.type = this.$route.query.type
    },
}
</script>

<style lang="scss" scoped>
.åº•éƒ¨{
    position: relative;
    border-top: 1px solid #cccccc;
}
.æ°”æ³¡{
    position: absolute;
    background: #0195ff;
    top: -40px;
    right: 10px;
    width: 30px;
    height: 30px;
    border-radius: 30px;
    line-height: 30px;
    text-align: center;
    color: #ffffff;
    font-size: 12px;
    &::after{
        position: absolute;
        left: 0px;
        top: 85%;
        right: 0px;
        margin: auto;
        content: '';

        width: 0;
        height: 0;
        border: 5px solid transparent;
        border-top: 10px solid#0195ff;
    }
}

.è¾“å…¥æ¡†{
    display: flex;
    height: _vw(50);
    padding: 5px;
    align-items: center;
    input{
        margin: 0px 5px 0px 0px;
    }
    input[readonly="readonly"]{
        background: #f7f7f7;
    }
    i{
        color: #767676;
        font-size: _vw(36);
    }
    .icon-smile{
        margin: 0px _vw(5);
    }
    button{
        font-size: _vw(12);
        padding: 0px;
        width: _vw(36);
        height: _vw(36);
        flex-shrink: 0;
    }
    .btn_1{
        font-size: _vw(12);
        line-height: _vw(36);
        width: _vw(36);
        background: #007aff;
        text-align: center;
        flex-shrink: 0;
        color: #ffffff;
    }
}

.box_2{
    height: _vw(290);
    padding: _vw(10) 0px 0px;
}

.å­—ä½“{
    // padding: _vw(25) 0px 0px;
    height: 100%;
    overflow: auto;
    display: flex;
    flex-wrap: wrap;
    text-align: center;
    font-size: _vw(20);
    li{
        width: 20%;
        height: _vw(44);
    }
}

.æ›´å¤š{
    padding: _vw(20) 0px 0px;
    height: 100%;
    overflow: auto;
    display: flex;
    flex-wrap: wrap;
    align-content:baseline;
    font-size: _vw(13);
    li{
        width: 25%;
        text-align: center;
        margin-bottom: _vw(50);
    }
    img{
        height: 34px;
    }
}

</style>
